function initializeCanvas(e,t){let o=e.getContext("2d"),l=document.getElementsByClassName("article__content")[0].offsetWidth;return e.style.backgroundColor="#000",e.width=.75*l*t,e.height=.421875*l*t,e.style.width=`${.75*l}px`,e.style.height=`${.421875*l}px`,o.translate(0,e.height),o.scale(t,-t),o}function calculateColorLim(e,t=1e3){let o=-1/0,l=1/0;for(let n=0;n<t;n++){let i=Math.random()*bounds.width,r=Math.random()*bounds.height,[,,,a]=e.interpolate(i,r);a>o&&(o=a),a<l&&(l=a)}return l===o&&(o+=1,l-=1),[l,o]}function calculateColorScale(e,t,o){function l(e,t,o){return e.map((e,l)=>Math.round(e+o*(t[l]-e)))}let n=[];for(let i=0;i<=e;i++){let r=i/e,a=r*(o.length-1),h=Math.floor(a),$=a-h,g=h<o.length-1?l(o[h],o[h+1],$):o[o.length-1];n.push(`rgba(${g[0]}, ${g[1]}, ${g[2]}, 0.8)`)}return{indexFor:o=>Math.max(Math.min(Math.floor((o-t[0])/(t[1]-t[0])*e),e),0),getColor:e=>n[e]}}function randomizeParticle(e){return e.x=Math.random()*bounds.width,e.y=Math.random()*bounds.height,e.age=Math.random()*MAX_PARTICLE_AGE,e}function evolve(e,t){e.forEach(e=>{e.age>MAX_PARTICLE_AGE&&randomizeParticle(e);let o=t.interpolate(e.x,e.y),l=o[2];o&&null!==l?(e.x+=EVOLVE_STEP*o[0],e.y+=EVOLVE_STEP*o[1],(e.x>bounds.width||e.x<0||e.y>bounds.height||e.y<0)&&randomizeParticle(e)):e.age=MAX_PARTICLE_AGE,e.age++})}function draw(e,t,o,l){l.globalCompositeOperation="destination-in",l.fillStyle="rgba(0, 0, 0, 0.95)",l.fillRect(bounds.x,bounds.y,bounds.width,bounds.height),l.globalCompositeOperation="lighter",l.lineWidth=LINE_WIDTH,e.forEach(e=>{let n=t.interpolate(e.x,e.y),i=n[2],r=n[0]/i,a=n[1]/i,h=o.indexFor(n[3]);l.strokeStyle=o.getColor(h),l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x-r,e.y-a),l.stroke()})}function frame(e,t,o,l){evolve(e,t),draw(e,t,o,l),setTimeout(()=>requestAnimationFrame(()=>frame(e,t,o,l)),FRAME_RATE)}